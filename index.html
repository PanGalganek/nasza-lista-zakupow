<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LabManager - System Wzorc√≥w</title>
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .ordered-row { background-color: #f0fdf4 !important; opacity: 0.9; }
        .editable:hover { cursor: pointer; background-color: #fef9c3; }
        .alert-warning { background-color: #fffbeb; border-left: 4px solid #f59e0b; color: #92400e; }
        .alert-success { background-color: #f0fdf4; border-left: 4px solid #22c55e; color: #166534; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen p-2 md:p-6 flex items-center justify-center font-sans text-slate-900">

    <div id="loginSection" class="max-w-md w-full bg-white rounded-2xl shadow-2xl p-8 border border-slate-200">
        <h2 class="text-3xl font-extrabold mb-6 text-center text-slate-800 tracking-tight">üß™ LabManager</h2>
        <p class="text-center text-slate-500 mb-8 text-sm">Zaloguj siƒô do bazy wzorc√≥w</p>
        <input type="email" id="loginEmail" placeholder="E-mail" class="w-full border p-3 rounded-xl mb-4 outline-none focus:ring-2 focus:ring-blue-500 transition-all">
        <input type="password" id="loginPassword" placeholder="Has≈Ço" class="w-full border p-3 rounded-xl mb-8 outline-none focus:ring-2 focus:ring-blue-500 transition-all">
        <button onclick="handleLogin()" class="w-full bg-slate-800 text-white font-bold py-4 rounded-xl hover:bg-slate-900 transition-all shadow-lg active:scale-95 text-lg">Zaloguj system</button>
    </div>

    <div id="appSection" class="hidden max-w-6xl w-full bg-white rounded-2xl shadow-2xl p-4 md:p-8 border border-slate-200">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
            <div>
                <h1 class="text-2xl font-bold text-slate-800 tracking-tight">ZarzƒÖdzanie Wzorcami i Materia≈Çami</h1>
                <p id="authStatus" class="text-[10px] text-slate-400 mt-1 uppercase tracking-widest font-semibold"></p>
            </div>
            <button onclick="handleLogout()" class="px-4 py-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-all text-xs font-bold">Wyloguj sesjƒô</button>
        </div>

        <div id="alert-section" class="p-4 rounded-xl mb-8 text-sm shadow-sm hidden"></div>

        <div class="flex gap-4 mb-6">
            <button onclick="addRow()" class="bg-blue-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-700 transition shadow-md active:scale-95 text-sm">‚ûï Dodaj Nowy</button>
        </div>

        <div class="overflow-x-auto rounded-xl border border-slate-200">
            <table class="w-full border-collapse text-left">
                <thead>
                    <tr class="bg-slate-800 text-white text-[10px] uppercase tracking-wider">
                        <th class="p-4 w-12 text-center">LP</th>
                        <th class="p-4 w-24">Grupa</th>
                        <th class="p-4">Nazwa Wzorca</th>
                        <th class="p-4 w-32">Wa≈ºno≈õƒá</th>
                        <th class="p-4">Zastosowanie</th>
                        <th class="p-4 w-24 text-right">Akcje</th>
                    </tr>
                </thead>
                <tbody id="tableBody" class="text-xs">
                    </tbody>
            </table>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyANS8FT-mgc8D1kR-WXlhzjEvufveMMeM8",
            authDomain: "nasza-lista-zakupow.firebaseapp.com",
            projectId: "nasza-lista-zakupow",
            storageBucket: "nasza-lista-zakupow.firebasestorage.app",
            messagingSenderId: "516283526174",
            appId: "1:516283526174:web:f42c9c38333e821da5520f"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        
        const csvRaw = `1,II-1/29,"Wzorzec barwy 500 Color Units (lot 945521, CPAchem, ISO 17034)",20.11.2026,"Oznaczanie barwy / Okresowe sprawdzanie"
2,II-3/06,"Wzorzec jon√≥w fosforanowych PO‚ÇÑ¬≥‚Åª (seria III/25 OUM PCA)",16.01.2026,"Oznaczanie fosforan√≥w / Sprawdzanie okresowe"
3,II-4/31,"Wzorzec jon√≥w amonowych N‚ÄìNH‚ÇÑ‚Å∫ (seria I/25 OUM PCA)",27.01.2026,"Oznaczanie azotu amonowego / Sprawdzanie bie≈ºƒÖce"
4,II-5/06,"Wzorzec jon√≥w amonowych N‚ÄìNH‚ÇÑ‚Å∫ (seria III/25 OUM PCA)",21.07.2026,"Oznaczanie azotu amonowego / Sprawdzanie okresowe"
5,II-7/26,"Wzorzec jon√≥w Mn¬≤‚Å∫ (seria I/25 OUM PCA)",07.03.2026,"Oznaczanie manganu / Bie≈ºƒÖce sprawdzanie"
6,II-8/32,"Wzorzec jon√≥w Fe¬≥‚Å∫ (seria I/25 PCA)",04.03.2026,"Oznaczanie ≈ºelaza / Bie≈ºƒÖce sprawdzanie"
7,II-9/22,"CRM pH 4,00 (lot 1081870 CPAchem)",28.02.2026,"Okresowe sprawdzanie pH / Sprawdzanie bie≈ºƒÖce"
8,II-13/27,"CRM pH 10,00 (lot 1164060 CPAchem)",13.11.2026,"Sprawdzanie pH"
9,II-15/21,"Wzorzec siarczan√≥w SO‚ÇÑ¬≤‚Åª (seria IV/25 PCA‚ÄìOUM ≈Å√≥d≈∫)",22.08.2026,"Oznaczanie siarczan√≥w / Sprawdzanie okresowe"
10,II-16/15,"BOD 200 mg/l (lot LRADG875 Sigma-Aldrich)",31.05.2026,"Oznaczanie BZT‚ÇÖ / Okresowe sprawdzanie"
11,II-17/11,"Total Kjeldahl Nitrogen (lot LRAD7960 Sigma-Aldrich)",03.2027,"Oznaczanie azotu Kjeladala"
12,II-18/02,"Dissolved Oxygen CRM (lot LRAE0605)",01.2027,"Oznaczanie tlenu rozpuszczonego"
13,II-21/05,"Rezorcyna (materia≈Ç odniesienia, nr 240328093)",03.2028,"Oznaczanie indeksu nadmanganianowego"
14,II-23/45,"Wzorzec N‚ÄìNO‚ÇÇ‚Åª (seria VII/25 OUM PCA)",19.03.2026,"Oznaczanie azotu azotynowego / Sprawdzanie bie≈ºƒÖce"
15,II-24/16,"Wzorzec chlork√≥w Cl‚Åª (seria I/25 PCA)",05.03.2026,"Oznaczanie jon√≥w chlorkowych"
16,II-26/24,"Wzorzec Mg¬≤‚Å∫ (seria I/25 OUM PCA)",07.02.2026,"Oznaczanie Mg / Ca+Mg"
17,II-27/27,"Wzorzec CHZT 500 mg/l COD STANDARD (lot 1145361 CPAchem)",12.09.2027,"Oznaczanie CHZT / Sprawdzanie bie≈ºƒÖce"
18,II-28/28,"Wzorzec N‚ÄìNO‚ÇÉ‚Åª (seria III/25 PCA OUM)",19.08.2026,"Oznaczanie azotu azotanowego / Okresowe sprawdzanie"
19,II-29/02,"Wzorzec konduktometryczny 5 ŒºS/cm (lot 1146903 CPAchem)",21.03.2026,"Okresowe sprawdzanie przewodno≈õci"
20,II-31/02,"Wzorzec konduktometryczny 100 ŒºS/cm (lot 1073792)",06.02.2026,"Sprawdzanie przewodno≈õci"
21,II-32/02,"Wzorzec konduktometryczny 1413 ŒºS/cm (lot 1073788)",06.02.2026,"Okresowe sprawdzanie przewodno≈õci"
22,II-33/02,"Wzorzec konduktometryczny 10000 ŒºS/cm (lot 1073793)",06.02.2026,"Sprawdzanie przewodno≈õci"
23,II-36/38-39,"Wzorzec Ca¬≤‚Å∫ (seria I/25 i III/25 PCA)",09.04.2026 / 17.10.2026,"Oznaczanie Ca+Mg"
24,II-37/24,"Wzorzec konduktometryczny 100 ŒºS/cm (lot 1115022)",09.06.2026,"Oznaczanie przewodno≈õci"
25,II-38/20,"Wzorzec konduktometryczny 1413 ŒºS/cm (lot 1115026)",09.06.2026,"Oznaczanie przewodno≈õci / Bie≈ºƒÖce sprawdzanie"
26,II-39/22,"Wzorzec konduktometryczny 10000 ŒºS/cm (lot 1115047)",09.06.2026,"Sprawdzanie przewodno≈õci"
27,II-40/20,"Wzorzec Al¬≥‚Å∫ (seria IV/25 PCA)",19.08.2026,"Oznaczanie glinu"
28,II-44/12,"Wzorzec chloru wolnego (lot LRAE1141)",30.04.2028,"Okresowe sprawdzanie chloru"
29,II-45/06,"Di-sodu Œ≤-glicerofosforan cz.d.a. (lot 10212980)",23.02.2028,"Oznaczanie fosforu"
30,II-46/18,"Wzorzec Cu¬≤‚Å∫ (seria III/25 OUM PCA)",12.09.2026,"Oznaczanie miedzi / Sprawdzanie bie≈ºƒÖce"
31,II-47/17,"Wzorzec Ni¬≤‚Å∫ (seria III/25 OUM PCA)",10.09.2026,"Oznaczanie niklu / Bie≈ºƒÖce sprawdzanie"
32,II-48/17,"Wzorzec Zn¬≤‚Å∫ (seria I/25 OUM PCA)",29.04.2026,"Oznaczanie cynku / Sprawdzanie bie≈ºƒÖce"
33,II-49/17,"Wzorzec Cr¬≥‚Å∫ (seria III/25 OUM PCA)",21.10.2026,"Okresowe sprawdzanie chromu"
34,II-50/03,"Wzorzec pH 4,00 (lot 1164073)",13.11.2026,"Sprawdzanie pH"
35,II-51/09,"Wzorzec pH 2,00 (lot 1073794)",06.02.2026,"Okresowe sprawdzanie pH"
36,II-53/13,"Wzorzec pH 12,6 (BLS 099-120)",26.03.2026,"Sprawdzanie pH"
37,II-53/14,"Wzorzec pH 12,19 (lot 5E111H5)",02.2027,"Sprawdzanie pH"
38,II-54/16,"
